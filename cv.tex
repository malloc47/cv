\documentclass[10pt]{article}
\usepackage[left=1in, right=1in, top=1in, bottom=1in]{geometry}
\usepackage{longtable}
\usepackage{xifthen}
\usepackage[xetex,
            unicode,
            pdfencoding=auto,
            pdfinfo={
              Title={malloc47/cv},
              Author={Jarrell Waggoner},
              Subject={Jarrell Waggoner CV},
              Keywords={computer vision, image processing, artificial intelligence, pattern recognition, machine learning, data science, functional programming, web development, GIS, Clojure},
              Producer={xelatex},
              Creator{xelatex}
            },
            ]{hyperref}

\include{functions}
\include{content}

\begin{document}
\pagestyle{empty}
\name

\biographical

\section{Research Interests}
\interestsLong

\section{Education}
% TODO: un-inline this back into content.tex once I figure out a
% better way to do embedded \multicolumn inside of a \newcommand
% and/or some other workaround
\begin{tabularx}{\linewidth}{@{}l X l@{}}
  \textbf{Doctor of Philosophy} in \textsc{Computer Science \& Engineering} & University of South Carolina & \textcolor{darkg}{08/2013} \\
  \multicolumn{3}{@{}l}{\begin{small}Advisor: Dr. Song \textsc{Wang}\end{small}} \\
  \multicolumn{3}{@{}l}{\begin{footnotesize}Dissertation:
      ``Multi-Label Segmentation Propagation for Materials Science
      Images Incorporating Topology and
      Interactivity''\end{footnotesize}} \\
  & &\\[-1ex]
  \textbf{Master of Engineering} in \textsc{Computer Science} & University of South Carolina & \textcolor{darkg}{05/2009} \\
  \multicolumn{3}{@{}l}{\begin{small}\emph{magna cum laude}\end{small}}
\end{tabularx}

\section{Industry Experience}
\rally
\drw
\groupon
\terrastride
\palmettocomputerlabs
\elasticvision

\vspace{-1em}

%% Restart page numbering (sadly have to place by trial and error)
\pagestyle{myheadings}
\markright{Jarrell Waggoner}

\DeclareDocumentCommand \academic {m m m m m m +m o}{%
\begin{normalsize}
  \nopagebreak \begin{large}#2 #3\end{large} | #4 \hfill \textcolor{darkg}{#6}
\end{normalsize}
\\
\begin{small}#7 \IfNoValueF{#8}{ \\ #8}\end{small}

\vspace{\baselineskip}
}

\section{Research Experience}
\afosr
\darpa
\nehfellow

\vspace{-1em}

\section{Teaching Experience}
\crayton
\cseTA
\usclTA
\campInstructor
\tutor

\vspace{-1em}

\makeatletter
\renewcommand{\@bibunitname}{\jobname.\the\@bibunitauxcnt}
\makeatother

\begin{bibunit}[plainyr-rev]
  \let\originalbibitem\bibitem
  \def\bibitem#1#2\par{%
    \noexpandarg
    \originalbibitem{#1}
    \StrSubstitute{#2}{Jarrell Waggoner}{\textbf{Jarrell Waggoner}}\par}
  \renewcommand\refname{Publications}
  \referenceslist
  \putbib[cv]
\end{bibunit}

\begin{bibunit}[plainyr-rev]
  \makeatletter
  \renewcommand*{\@biblabel}[1]{\hfill[P#1]}
  \makeatother
  \renewcommand\refname{Posters/Presentations}
  \presentations
  \putbib[cv]
\end{bibunit}

\section{Honors/Awards}
\newcommand{\award}[4]{
  #1 & #3 & #2 \textcolor{lightg}{\dotfill} & \emph{#4} \\
}
\begin{longtable}{l l @{\hspace{0.5em}\hspace{0.5em}} p{10cm} l}
  \awardlist
\end{longtable}

\section{Classes Taught}
\newcommand{\class}[3]{& #1 & #2 & #3 \\}
\begin{longtable}{p{1cm} l @{\hspace{0.5em}\hspace{0.5em}} l l}
  \multicolumn{4}{l}{\href{https://www.it-ology.org/}{IT-oLogy}} \\
  \itologyOS
  \itologyVC
  \itologyCL
  \multicolumn{3}{l}{\href{https://www.sc.edu/}{USC}} \\
  \uscCCI
  \uscCII
  \uscCXLVSpring
  \uscCXLVFall
  \multicolumn{3}{l}{\href{http://usclancaster.sc.edu}{USCL}} \\
  \usclCCIV
  \usclMath
\end{longtable}

\section{Service}
\newcommand{\service}[3]{
  \textsc{#1} & #2 \textcolor{lightg}{\dotfill} & \emph{#3}\\
}
\renewcommand*{\arraystretch}{1.33}
\begin{longtable}{r @{\hspace{0.5em}\textcolor{lightg}{\symbol{"00BB}}\hspace{0.5em}} p{10cm} l}
  \servicelist
\end{longtable}

\section{Personal and Open Source Projects}

\newcommand{\proj}[3]{
\begin{normalsize}
  \begin{large}\textsc{#1}\end{large} | \href{http://www.#3}{#3}
  \\
  \begin{small}\textcolor{darkg}{#2}\end{small}
\end{normalsize}

\vspace{0.5\baselineskip}}

\matsciseg
\ratiocontour
\digitalcollation
\matscicut
\befungepy

\begin{minipage}{\linewidth}
  %% \vspace{-1em}
  \section{Skills \& Languages}
  \begin{multicols}{4}
    \raggedcolumns
    \begin{itemize}
      \renewcommand{\labelitemi}{}
      \renewcommand{\skill}{\textnormal}
      \setlength{\itemsep}{1pt}
      \setlength{\parskip}{0pt}
      \setlength{\parsep}{0pt}
      \skillsListLong
    \end{itemize}
  \end{multicols}
  \skillsLegend
\end{minipage}
\vspace{-1em}

\section{Activities}
\activities

\footer

%%\XeTeXpdffile ''cv.pdf'' page 1 scaled 800

\end{document}
